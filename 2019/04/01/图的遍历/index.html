<!DOCTYPE html>


  <html class="light page-post">


<head>
  <meta charset="utf-8">
  
  <title>图的遍历 | Homxu</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="数据结构,图," />
  

  <meta name="description" content="对于图的遍历，和树一样，也有深度优先遍历和广度优先遍历。对于图的深度优先遍历，是从一个点开始，不停的往下试探，知道不能继续为止。但是与树不同的是，图有可能会存在环，所以要记录一下某个点是否已经被遍历过，如果已经被遍历过，则下面的遍历就不需要继续走这个点了。 以下面的数据为例: 深度优先遍历假设从0开始遍历，看与0相连的第一个节点1，节点1没有遍历过所以遍历了1，此时为0 1；接着看和节点1相邻的节">
<meta name="keywords" content="数据结构,图">
<meta property="og:type" content="article">
<meta property="og:title" content="图的遍历">
<meta property="og:url" content="http://homxu.com/2019/04/01/图的遍历/index.html">
<meta property="og:site_name" content="Homxu">
<meta property="og:description" content="对于图的遍历，和树一样，也有深度优先遍历和广度优先遍历。对于图的深度优先遍历，是从一个点开始，不停的往下试探，知道不能继续为止。但是与树不同的是，图有可能会存在环，所以要记录一下某个点是否已经被遍历过，如果已经被遍历过，则下面的遍历就不需要继续走这个点了。 以下面的数据为例: 深度优先遍历假设从0开始遍历，看与0相连的第一个节点1，节点1没有遍历过所以遍历了1，此时为0 1；接着看和节点1相邻的节">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://homxu.com/2019/04/01/图的遍历/1.png">
<meta property="og:image" content="http://homxu.com/2019/04/01/图的遍历/2.png">
<meta property="og:image" content="http://homxu.com/2019/04/01/图的遍历/3.png">
<meta property="og:image" content="http://homxu.com/2019/04/01/图的遍历/4.png">
<meta property="og:image" content="http://homxu.com/2019/04/01/图的遍历/1.png">
<meta property="og:image" content="http://homxu.com/2019/04/01/图的遍历/5.png">
<meta property="og:image" content="http://homxu.com/2019/04/01/图的遍历/6.png">
<meta property="og:image" content="http://homxu.com/2019/04/01/图的遍历/7.png">
<meta property="og:updated_time" content="2019-04-03T07:57:07.625Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="图的遍历">
<meta name="twitter:description" content="对于图的遍历，和树一样，也有深度优先遍历和广度优先遍历。对于图的深度优先遍历，是从一个点开始，不停的往下试探，知道不能继续为止。但是与树不同的是，图有可能会存在环，所以要记录一下某个点是否已经被遍历过，如果已经被遍历过，则下面的遍历就不需要继续走这个点了。 以下面的数据为例: 深度优先遍历假设从0开始遍历，看与0相连的第一个节点1，节点1没有遍历过所以遍历了1，此时为0 1；接着看和节点1相邻的节">
<meta name="twitter:image" content="http://homxu.com/2019/04/01/图的遍历/1.png">

  

  
    <link rel="icon" href="/favicon.ico">
  

  <link href="/css/styles.css?v=c114cbeddx" rel="stylesheet">


  
    <link rel="stylesheet" href="/css/personal-style.css">
  

  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-141265597-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?65b28a9c8db126aaee36b688371996c8";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>


  
  <script type="text/javascript">
	(function(){
	    var bp = document.createElement('script');
	    var curProtocol = window.location.protocol.split(':')[0];
	    if (curProtocol === 'https') {
	        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
	    }
	    else {
	        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
	    }
	    var s = document.getElementsByTagName("script")[0];
	    s.parentNode.insertBefore(bp, s);
	})();
  </script>



  
    <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">
  

</head>

<body>


  
    <span id="toolbox-mobile" class="toolbox-mobile">盒子</span>
  

  <div class="post-header CENTER">
   
  <div class="toolbox">
    <a class="toolbox-entry" href="/">
      <span class="toolbox-entry-text">盒子</span>
      <i class="icon-angle-down"></i>
      <i class="icon-home"></i>
    </a>
    <ul class="list-toolbox">
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/archives/"
            rel="noopener noreferrer"
            target="_self"
            >
            博客
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/category/"
            rel="noopener noreferrer"
            target="_self"
            >
            分类
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/tag/"
            rel="noopener noreferrer"
            target="_self"
            >
            标签
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/about/"
            rel="noopener noreferrer"
            target="_self"
            >
            关于
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/atom.xml"
            rel="noopener noreferrer"
            target="_blank"
            >
            RSS
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/search/"
            rel="noopener noreferrer"
            target="_self"
            >
            搜索
          </a>
        </li>
      
    </ul>
  </div>


</div>


  <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#深度优先遍历"><span class="toc-text">深度优先遍历</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#连通分量"><span class="toc-text">连通分量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#获得两点间的一条路径"><span class="toc-text">获得两点间的一条路径</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#深度优先遍历的复杂度"><span class="toc-text">深度优先遍历的复杂度</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#广度优先遍历"><span class="toc-text">广度优先遍历</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#广度优先遍历的复杂度"><span class="toc-text">广度优先遍历的复杂度</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#java实现"><span class="toc-text">java实现</span></a></li></ol>
  </div>



<div class="content content-post CENTER">
   <article id="post-图的遍历" class="article article-type-post" itemprop="blogPost">
  <header class="article-header">
    <h1 class="post-title">图的遍历</h1>

    <div class="article-meta">
      <span>
        <i class="icon-calendar"></i>
        <span>2019.04.01</span>
      </span>

      
        <span class="article-author">
          <i class="icon-user"></i>
          <span>Homxu</span>
        </span>
      

      


      

      
      <i class="fa fa-eye"></i> 
        <span id="busuanzi_container_page_pv">
           &nbsp热度 <span id="busuanzi_value_page_pv">
           <i class="fa fa-spinner fa-spin"></i></span>℃
        </span>
      
      
    </div>
  </header>

  <div class="article-content">
    
      <p>对于图的遍历，和树一样，也有深度优先遍历和广度优先遍历。<br>对于图的深度优先遍历，是从一个点开始，不停的往下试探，知道不能继续为止。但是与树不同的是，图有可能会存在环，所以要记录一下某个点是否已经被遍历过，如果已经被遍历过，则下面的遍历就不需要继续走这个点了。</p>
<p>以下面的数据为例:<br><img src="/2019/04/01/图的遍历/1.png" alt="图"></p>
<h1 id="深度优先遍历"><a href="#深度优先遍历" class="headerlink" title="深度优先遍历"></a>深度优先遍历</h1><p>假设从0开始遍历，看与0相连的第一个节点1，节点1没有遍历过所以遍历了1，此时为<code>0 1</code>；<br>接着看和节点1相邻的节点，只有节点0，节点0已经被遍历过了，不用管，此时1没有其他相邻节点了，此时这条路就算走完了，则退回到节点0；<br>然后看0的下一个没有被遍历的节点为节点2,节点2没有被遍历过，所以将2遍历，此时为<code>0 1 2</code>；<br>接着看和节点2相邻的节点，只有节点0，节点0已经被遍历过，退回到节点0；<br>接着看下一个和0相邻的节点，为节点5，没有被遍历过，所以对节点5进行遍历，此时遍历的元素为<code>0 1 2 5</code>；<br>接着看和节点5相邻的节点，第一个节点为节点0，已经被遍历过；第二个节点为节点3，没有被遍历过，所以进行遍历，此时遍历的元素为<code>0 1 2 5 3</code>；<br>接着看和节点3相邻的节点，第一个为节点4，没有被遍历过，所以进行遍历，此时遍历元素为<code>0 1 2 5 3 4</code>；<br>然后看和节点4相邻的节点，节点3和节点5已经被遍历过了，不进行遍历；节点6没有被遍历过，所以进行遍历，此时遍历的元素为<code>0 1 2 5 3 4 6</code>；<br>然后来到节点6，和节点6相邻的节点0和节点4已经被遍历过了，所以不进行遍历；<br>然后退回到节点4，节点4从节点6退回来之后，没有其他节点，节点4的这条路遍历完了，所以从节点4退回到节点3；对于节点3来说，刚才将节点4遍历了，下一个节点5也已经遍历了，节点3这条路遍历完了；所以又从节点3退回到节点5，对于节点5的下一个节点——节点4也已经遍历过了，所以节点5这条路也遍历完了；退回到节点0，节点0的下一个要遍历的节点6已经被遍历过了，所以节点0这条路也已经便利完了；<br>至此，使用深度优先的方式，将所有节点全部遍历了一遍。</p>
<p>整个过程需要记录一下某个节点是否已经被遍历过。</p>
<h2 id="连通分量"><a href="#连通分量" class="headerlink" title="连通分量"></a>连通分量</h2><p>深度优先遍历的一个典型应用就是求连通分量。</p>
<p>对于一张有三个部分的图，在图论中，这三部分就是连通分量。连通分量之间没有任何边相连。求连通分量只需整体遍历这个图，从某个点开始遍历，先将这个连通分量遍历完；然后再找一个没有被遍历的点，继续遍历，则也可以将第二部分遍历完；最后将剩下的部分进行遍历。</p>
<p><img src="/2019/04/01/图的遍历/2.png" alt="图"></p>
<p>以求连通分量为例，实现图的深度优先遍历。<br>创建<code>Component.h</code><br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> COMPONENT_H_INCLUDED</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> COMPONENT_H_INCLUDED</span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Graph&gt;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Component</span>&#123;</span></div><div class="line"></div><div class="line"><span class="keyword">private</span>:</div><div class="line">    Graph &amp;G;</div><div class="line">    <span class="keyword">bool</span> *visited; <span class="comment">//记录某个节点是否已经被访问过</span></div><div class="line">    <span class="keyword">int</span> ccount; <span class="comment">//连通分量个数</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">( <span class="keyword">int</span> v )</span></span>&#123;</div><div class="line"></div><div class="line">        visited[v] = <span class="literal">true</span>;</div><div class="line"></div><div class="line">        <span class="keyword">typename</span> Graph::<span class="function">adjIterator <span class="title">adj</span><span class="params">(G, v)</span></span>; <span class="comment">//加typename指定adjInterator是一个类型而不是一个成员变量</span></div><div class="line">        <span class="keyword">for</span>( <span class="keyword">int</span> i = adj.begin() ; !adj.end() ; i = adj.next() ) &#123;<span class="comment">//从adj的第一个开始，只要不到adj的结尾，就进行循环，每次i变为adj的下一个元素</span></div><div class="line">            <span class="keyword">if</span>( !visited[i] ) <span class="comment">//如果没有被访问过，使用递归方法对它继续进行深度优先遍历，</span></div><div class="line">                dfs(i);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    Component(Graph &amp;graph): G(graph)&#123;</div><div class="line">        visited = <span class="keyword">new</span> <span class="keyword">bool</span>[G.V()];</div><div class="line">        ccount = <span class="number">0</span> ;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; G.V() ; i ++)</div><div class="line">            visited[i] = <span class="literal">false</span>;</div><div class="line"></div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; G.V() ; i ++)&#123;</div><div class="line">            <span class="keyword">if</span>( !visited[i] )&#123; <span class="comment">//如果当前的节点没有被访问过的话，就进行深度优先遍历</span></div><div class="line">                dfs(i);     <span class="comment">//遍历之后，所有连通的节点都置为true</span></div><div class="line">                ccount ++;  <span class="comment">//遍历之后，连通分量+1；然后接着找没有被遍历的节点作为起点进行深度遍历</span></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    ~Component()&#123;</div><div class="line">        <span class="keyword">delete</span>[] visited;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">count</span><span class="params">()</span></span>&#123;</div><div class="line">        <span class="keyword">return</span> ccount;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// COMPONENT_H_INCLUDED</span></span></div></pre></td></tr></table></figure></p>
<p>新建文件<code>testG3.txt</code>，例子中的图表达为:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">7 8</div><div class="line">0 1</div><div class="line">0 2</div><div class="line">0 5</div><div class="line">0 6</div><div class="line">3 4</div><div class="line">3 5</div><div class="line">4 5</div><div class="line">4 6</div></pre></td></tr></table></figure></p>
<p>在main函数中进行测试:<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"SparseGraph.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"DenseGraph.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ReadGraph.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Component.h"</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="built_in">string</span> filename1 = <span class="string">"testG1.txt"</span>;</div><div class="line">    SparseGraph g1 = SparseGraph(<span class="number">13</span>, <span class="literal">false</span>);</div><div class="line">    ReadGraph&lt;SparseGraph&gt; readGraph1(g1, filename1);</div><div class="line">    Component&lt;SparseGraph&gt; component1(g1);</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"TestG1.txt, Using Sparse Graph, Component Count: "</span>&lt;&lt;component1.count()&lt;&lt;<span class="built_in">endl</span>;</div><div class="line"></div><div class="line">    DenseGraph g2 = DenseGraph(<span class="number">13</span>, <span class="literal">false</span>);</div><div class="line">    ReadGraph&lt;DenseGraph&gt; readGraph2(g2, filename1);</div><div class="line">    Component&lt;DenseGraph&gt; component2(g2);</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"TestG1.txt, Using Dense Graph, Component Count: "</span>&lt;&lt;component2.count()&lt;&lt;<span class="built_in">endl</span>;</div><div class="line"></div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line"></div><div class="line">    <span class="comment">// TestG3.txt - g3 and g4</span></div><div class="line">    <span class="built_in">string</span> filename2 = <span class="string">"testG2.txt"</span>;</div><div class="line">    SparseGraph g3 = SparseGraph(<span class="number">7</span>, <span class="literal">false</span>);</div><div class="line">    ReadGraph&lt;SparseGraph&gt; readGraph3(g3, filename2);</div><div class="line">    Component&lt;SparseGraph&gt; component3(g3);</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"TestG3.txt, Using Sparse Graph, Component Count: "</span>&lt;&lt;component3.count()&lt;&lt;<span class="built_in">endl</span>;</div><div class="line"></div><div class="line">    DenseGraph g4 = DenseGraph(<span class="number">7</span>, <span class="literal">false</span>);</div><div class="line">    ReadGraph&lt;DenseGraph&gt; readGraph4(g4, filename2);</div><div class="line">    Component&lt;DenseGraph&gt; component4(g4);</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"TestG3.txt, Using Dense Graph, Component Count: "</span>&lt;&lt;component4.count()&lt;&lt;<span class="built_in">endl</span>;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><img src="/2019/04/01/图的遍历/3.png" alt="测试结果"></p>
<p>相应的，如果能求出连通分量，也能求出两个结点之间是否是相连的。对<code>Component.h</code>做出修改:<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> COMPONENT_H_INCLUDED</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> COMPONENT_H_INCLUDED</span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Graph&gt;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Component</span>&#123;</span></div><div class="line"></div><div class="line"><span class="keyword">private</span>:</div><div class="line">    Graph &amp;G;</div><div class="line">    <span class="keyword">bool</span> *visited; <span class="comment">//记录某个节点是否已经被访问过</span></div><div class="line">    <span class="keyword">int</span> ccount; <span class="comment">//连通分量个数</span></div><div class="line">    <span class="keyword">int</span> *id;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">( <span class="keyword">int</span> v )</span></span>&#123;</div><div class="line"></div><div class="line">        visited[v] = <span class="literal">true</span>;</div><div class="line">        id[v] = ccount;  <span class="comment">//在进行dfs操作时，将id[v]的值设置为ccount的值，这样不同连通分量部分的顶点其值不同</span></div><div class="line">        <span class="keyword">typename</span> Graph::<span class="function">adjIterator <span class="title">adj</span><span class="params">(G, v)</span></span>; <span class="comment">//加typename指定adjInterator是一个类型而不是一个成员变量</span></div><div class="line">        <span class="keyword">for</span>( <span class="keyword">int</span> i = adj.begin() ; !adj.end() ; i = adj.next() ) &#123;<span class="comment">//从adj的第一个开始，只要不到adj的结尾，就进行循环，每次i变为adj的下一个元素</span></div><div class="line">            <span class="keyword">if</span>( !visited[i] ) <span class="comment">//如果没有被访问过，使用递归方法对它继续进行深度优先遍历，</span></div><div class="line">                dfs(i);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    Component(Graph &amp;graph): G(graph)&#123;</div><div class="line">        visited = <span class="keyword">new</span> <span class="keyword">bool</span>[G.V()];</div><div class="line">        id = <span class="keyword">new</span> <span class="keyword">int</span>[G.V()];</div><div class="line">        ccount = <span class="number">0</span> ;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; G.V() ; i ++)&#123;</div><div class="line">            visited[i] = <span class="literal">false</span>;</div><div class="line">            id[i] = <span class="number">-1</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; G.V() ; i ++)&#123;</div><div class="line">            <span class="keyword">if</span>( !visited[i] )&#123; <span class="comment">//如果当前的节点没有被访问过的话，就进行深度优先遍历</span></div><div class="line">                dfs(i);     <span class="comment">//遍历之后，所有连通的节点都置为true</span></div><div class="line">                ccount ++;  <span class="comment">//遍历之后，连通分量+1；然后接着找没有被遍历的节点作为起点进行深度遍历</span></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    ~Component()&#123;</div><div class="line">        <span class="keyword">delete</span>[] visited;</div><div class="line">        <span class="keyword">delete</span>[] id;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">count</span><span class="params">()</span></span>&#123;</div><div class="line">        <span class="keyword">return</span> ccount;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isConnected</span><span class="params">( <span class="keyword">int</span> v , <span class="keyword">int</span> w)</span></span>&#123;</div><div class="line">        assert( v &gt;= <span class="number">0</span> &amp;&amp; v &lt; n );</div><div class="line">        assert( w &gt;= <span class="number">0</span> &amp;&amp; w &lt; n );</div><div class="line">        <span class="keyword">return</span> id[v] == id[w];</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// COMPONENT_H_INCLUDED</span></span></div></pre></td></tr></table></figure></p>
<h2 id="获得两点间的一条路径"><a href="#获得两点间的一条路径" class="headerlink" title="获得两点间的一条路径"></a>获得两点间的一条路径</h2><p>使用深度优先的方式，不一定能获得一条最短路径。在<code>Path.h</code>类中新增一个数组<code>from</code>，用来记录每访问一个节点时，该节点是从哪个节点过来的，根据from数组，就可以倒推出两点之间相应的路径。<br><code>Path.h</code><br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> PATH_H_INCLUDED</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> PATH_H_INCLUDED</span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Graph&gt;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Path</span>&#123;</span></div><div class="line"></div><div class="line"><span class="keyword">private</span>:</div><div class="line">    Graph &amp;G;</div><div class="line">    <span class="keyword">int</span> s;</div><div class="line">    <span class="keyword">bool</span>* visited;</div><div class="line">    <span class="keyword">int</span>* from; <span class="comment">// 记录路径, from[i]表示查找的路径上i的上一个节点</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">( <span class="keyword">int</span> v )</span></span>&#123;</div><div class="line"></div><div class="line">        visited[v] = <span class="literal">true</span>;</div><div class="line">        <span class="keyword">typename</span> Graph::<span class="function">adjIterator <span class="title">adj</span><span class="params">(G, v)</span></span>; <span class="comment">//加typename指定adjInterator是一个类型而不是一个成员变量</span></div><div class="line">        <span class="keyword">for</span>( <span class="keyword">int</span> i = adj.begin() ; !adj.end() ; i = adj.next() ) &#123;<span class="comment">//从adj的第一个开始，只要不到adj的结尾，就进行循环，每次i变为adj的下一个元素</span></div><div class="line">            <span class="keyword">if</span>( !visited[i] ) &#123;</div><div class="line">                <span class="comment">//如果没有被访问过，使用递归方法对它继续进行深度优先遍历，并将该节点放入from[]数组，说明是从v节点过来的</span></div><div class="line">                from[i] = v;</div><div class="line">                dfs(i);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="comment">// 构造函数, 寻路算法, 寻找图graph从s点到其他点的路径</span></div><div class="line">    Path(Graph &amp;graph, <span class="keyword">int</span> s):G(graph)&#123;</div><div class="line">        <span class="comment">//算法初始化</span></div><div class="line">        assert( s &gt;= <span class="number">0</span> &amp;&amp; s &lt; G.V() );</div><div class="line"></div><div class="line">        visited = <span class="keyword">new</span> <span class="keyword">bool</span>[G.V()];</div><div class="line">        from = <span class="keyword">new</span> <span class="keyword">int</span>[G.V()];</div><div class="line">        <span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; G.V() ; i ++ )&#123;</div><div class="line">            visited[i] = <span class="literal">false</span>;</div><div class="line">            from[i] = <span class="number">-1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">this</span>-&gt;s = s;</div><div class="line"></div><div class="line">        <span class="comment">// 寻路算法</span></div><div class="line">        <span class="comment">// 其实就是进行深度优先遍历的过程中，记录一下</span></div><div class="line">        dfs(s);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    ~Path()&#123;</div><div class="line">        <span class="keyword">delete</span>[] visited;</div><div class="line">        <span class="keyword">delete</span>[] from;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//从原点s到w是否有路</span></div><div class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">hasPath</span><span class="params">(<span class="keyword">int</span> w)</span></span>&#123;</div><div class="line">        assert( w &gt;= <span class="number">0</span> &amp;&amp; w &lt; G.V() );</div><div class="line">        <span class="keyword">return</span> visited[w];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//从原点到w的具体路径是什么样的</span></div><div class="line">    <span class="comment">//因为是从w节点倒着走，所以先存放在stack中，然后在依次放在vector中</span></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">path</span><span class="params">(<span class="keyword">int</span> w, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;vec)</span></span>&#123;</div><div class="line">        <span class="comment">// 通过from数组逆向查找到从s到w的路径, 存放到栈中</span></div><div class="line">        <span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; s;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> p = w;</div><div class="line">        <span class="keyword">while</span>( p != <span class="number">-1</span> )&#123;</div><div class="line">            s.push(p);</div><div class="line">            p = from[p];</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        vec.clear();</div><div class="line">        <span class="keyword">while</span>( !s.empty() )&#123;</div><div class="line">            vec.push_back( s.top() );</div><div class="line">            s.pop();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//打印出从s到w的路径</span></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">showPath</span><span class="params">(<span class="keyword">int</span> w)</span></span>&#123;</div><div class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; vec;</div><div class="line"></div><div class="line">        path(w,vec);</div><div class="line"></div><div class="line">        <span class="keyword">for</span>( <span class="keyword">int</span>  i = <span class="number">0</span> ; i &lt; vec.size() ; i ++)&#123;</div><div class="line">            <span class="built_in">cout</span> &lt;&lt; vec[i];</div><div class="line">            <span class="keyword">if</span>( i == vec.size() - <span class="number">1</span>)</div><div class="line">                <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">            <span class="keyword">else</span></div><div class="line">                <span class="built_in">cout</span> &lt;&lt; <span class="string">" -&gt; "</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// PATH_H_INCLUDED</span></span></div></pre></td></tr></table></figure></p>
<p>在<code>main.h</code>中进行测试，打印从0到6的路径。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"SparseGraph.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"DenseGraph.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ReadGraph.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Path.h"</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="built_in">string</span> filename = <span class="string">"testG3.txt"</span>;</div><div class="line">    SparseGraph g = SparseGraph(<span class="number">7</span>, <span class="literal">false</span>);</div><div class="line">    ReadGraph&lt;SparseGraph&gt; readGraph1(g, filename);</div><div class="line">    g.show();</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line"></div><div class="line">    Path&lt;SparseGraph&gt; dfs(g,<span class="number">0</span>);</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"DFS : "</span>;</div><div class="line">    dfs.showPath(<span class="number">6</span>);</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="/2019/04/01/图的遍历/4.png" alt="测试结果"></p>
<h2 id="深度优先遍历的复杂度"><a href="#深度优先遍历的复杂度" class="headerlink" title="深度优先遍历的复杂度"></a>深度优先遍历的复杂度</h2><p>稀疏图（邻接表）:O(V+E)<br>稠密图（邻接矩阵）:O(V^2)</p>
<p>深度优先遍历对有向图依然有效</p>
<h1 id="广度优先遍历"><a href="#广度优先遍历" class="headerlink" title="广度优先遍历"></a>广度优先遍历</h1><p>广度优先遍历，使用队列进行辅助。<br>还是使用最开始的图进行讲解。<br><img src="/2019/04/01/图的遍历/1.png" alt="图"><br>首先将节点0推入队列中，然后开始遍历过程；（和树的遍历一致，先将根节点推入）(此时队列为<code>0</code>)<br>遍历时，每次遍历都将队列首的元素取出来作为遍历的对象，现在队列首是节点0，将其取出，遍历节点0；(此时队列为空,遍历过的节点有<code>0</code>)<br>然后将所有与节点0相邻的节点，如果还没有加入队列中，就将其加入，所以将节点1，节点2，节点5，节点6加入到队列中，这样就完成了一次操作；(此时队列为<code>1 2 5 6</code>,遍历过的节点有<code>0</code>)<br>接着，将队列首的节点1拿出来作为遍历的对象，节点1就被遍历了，而与节点1相邻的节点只有节点0,0已经遍历过；所以继续将节点2从队列首拿出来，作为遍历的对象，而节点2相邻的节点也只有节点0,不用管；(此时队列为<code>5 6</code>，遍历过的节点有<code>0 1 2</code>)<br>接着将队列首的节点5拿出来，作为遍历的对象，对于节点5，它相邻的节点有节点0，节点3，节点4，节点0已经加入过队列并遍历完，所以将节点3，节点4加入到队列中；(此时队列为<code>6 3 4</code>，遍历过的节点有<code>0 1 2 5</code>)<br>继续将队列首的节点6拿出来，作为遍历的对象，节点6的相邻节点有节点0和节点4，需要注意节点0已经被遍历过不需要管，节点4虽然没有被遍历过，但是它已经被加入到队列中（所以在代码实现时，注意需要对加入到队列中的元素进行标记，因为一旦被加入到队列，那么它一定会被遍历），所以这次遍历就算完成;(此时队列为<code>3 4</code>,遍历过的节点有<code>0 1 2 5 6</code>)<br>接着将队列首的节点3拿出来进行遍历，节点3相邻的节点有节点4和节点5，节点5和节点4都已经被加入过队列，这次遍历结束；(此时队列为<code>4</code>，遍历过的节点有<code>0 1 2 5 6 3</code>)<br>最后将队列首的节点4拿出来进行遍历，对于节点4相邻的节点3，节点5，节点6都已经加入过队列，所以这次遍历结束。<br>至此，队列为空，广度优先遍历结束。</p>
<p>其实广度优先遍历，是以距起始节点的距离为顺序进行遍历的。<br>首先0节点自己到自己的距离为0，然后与节点0所有相邻的节点1、2、5、6被推进队列，它们距节点0的距离都为1；<br>接着将节点3,4推入到队列，它们距节点0的距离都为2。<br>所以广度优先遍历有时候也成为层序优先遍历，以遍历的起点开始，一层层的往下推，先遍历的节点距离起始节点近（更严谨的说法是先遍历的节点到起始节点的距离是小于等于后遍历的节点的，比如先遍历节点1后遍历节点6，但是它们到节点0 的距离都是1）。<br>利用这种方法，可以在程序中记录这个距离。在无权图中记录到起始节点的距离，不仅如此，如果像深度优先遍历，同时用<code>from[]</code>记录每一个节点是从哪一个节点过来，还可以将最短路径同时求出来。所以，广度优先遍历的一个应用就是求出<code>无权图</code>的最短路径(这里注意是无权图，但是不局限于有向图还是无向图)。</p>
<p>新建<code>ShortestPath.h</code>类:<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> SHORTESTPATH_H_INCLUDED</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> SHORTESTPATH_H_INCLUDED</span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Graph&gt;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ShortestPath</span>&#123;</span></div><div class="line"></div><div class="line"><span class="keyword">private</span>:</div><div class="line">    Graph &amp;G;</div><div class="line">    <span class="keyword">int</span> s;</div><div class="line">    <span class="keyword">bool</span> *visited;  <span class="comment">// 记录dfs的过程中节点是否被访问</span></div><div class="line">    <span class="keyword">int</span> *from;  <span class="comment">// 记录路径, from[i]表示查找的路径上i的上一个节点</span></div><div class="line">    <span class="keyword">int</span> *ord; <span class="comment">//记录s到每一个节点的距离是多少，即记录路径中节点的次序。ord[i]表示i节点在路径中的次序。</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    ShortestPath( Graph &amp;graph, <span class="keyword">int</span> s):G(graph)&#123;</div><div class="line">        <span class="comment">//算法初始化</span></div><div class="line">        assert( s &gt;= <span class="number">0</span> &amp;&amp; s &lt; graph.V() );</div><div class="line"></div><div class="line">        visited = <span class="keyword">new</span> <span class="keyword">bool</span>[graph.V()];</div><div class="line">        from = <span class="keyword">new</span> <span class="keyword">int</span>[graph.V()];</div><div class="line">        ord = <span class="keyword">new</span> <span class="keyword">int</span>[graph.V()];</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span>  i = <span class="number">0</span> ; i &lt; graph.V() ; i++)&#123;</div><div class="line">            visited[i] = <span class="literal">false</span>;</div><div class="line">            from[i] = <span class="number">-1</span>;</div><div class="line">            ord[i] = <span class="number">-1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">this</span>-&gt;s = s;</div><div class="line"></div><div class="line">         <span class="comment">// 无向图最短路径算法, 从s开始广度优先遍历整张图</span></div><div class="line">        <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</div><div class="line">        q.push(s); <span class="comment">//首先向队列中推入原点s</span></div><div class="line">        visited[s] = <span class="literal">true</span>; <span class="comment">//标记s已经被访问</span></div><div class="line">        ord[s] = <span class="number">0</span>; <span class="comment">//标记原点到自己的距离为0</span></div><div class="line">        <span class="keyword">while</span>( !q.empty() )&#123;</div><div class="line">            <span class="keyword">int</span> v = q.front(); <span class="comment">//将队列首的元素取出</span></div><div class="line">            q.pop(); <span class="comment">//队列首的元素出队</span></div><div class="line"></div><div class="line">            <span class="keyword">typename</span> Graph::<span class="function">adjIterator <span class="title">adj</span><span class="params">(G,v)</span></span>;   <span class="comment">//遍历与队列首元素v所有相邻的元素</span></div><div class="line">            <span class="keyword">for</span>( <span class="keyword">int</span> i = adj.begin() ; !adj.end() ; i = adj.next() )&#123;</div><div class="line">                <span class="keyword">if</span>( !visited[i] )&#123; <span class="comment">//查看i元素是不是已经被访问过，即是否已经被加入过队列，如果没有的话</span></div><div class="line">                    q.push(i); <span class="comment">//把i加入到队列中</span></div><div class="line">                    visited[i] = <span class="literal">true</span>;</div><div class="line">                    from[i] = v; <span class="comment">//是从v节点走到i的</span></div><div class="line">                    ord[i] = ord[v] + <span class="number">1</span>; <span class="comment">//从过来的节点的距离+1</span></div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    ~ShortestPath()&#123;</div><div class="line">        <span class="keyword">delete</span>[] visited;</div><div class="line">        <span class="keyword">delete</span>[] from;</div><div class="line">        <span class="keyword">delete</span>[] ord;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">hasPath</span><span class="params">(<span class="keyword">int</span> w)</span></span>&#123;</div><div class="line">        assert( w &gt;= <span class="number">0</span> &amp;&amp; w &lt; G.V());</div><div class="line">        <span class="keyword">return</span> visited[w];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">path</span><span class="params">(<span class="keyword">int</span> w ,<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;vec)</span></span>&#123;</div><div class="line">        assert( w &gt;= <span class="number">0</span> &amp;&amp; w &lt; G.V());</div><div class="line"></div><div class="line">        <span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; s;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> p = w;</div><div class="line">        <span class="keyword">while</span>( p != <span class="number">-1</span> )&#123;</div><div class="line">            s.push(p);</div><div class="line">            p = from[p];</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        vec.clear();</div><div class="line">        <span class="keyword">while</span>( !s.empty() )&#123;</div><div class="line">            vec.push_back( s.top() );</div><div class="line">            s.pop();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">showPath</span><span class="params">(<span class="keyword">int</span> w)</span></span>&#123;</div><div class="line"></div><div class="line">        assert( w &gt;= <span class="number">0</span> &amp;&amp; w &lt; G.V() );</div><div class="line"></div><div class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; vec;</div><div class="line">        path(w,vec);</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span>  i = <span class="number">0</span> ; i &lt; vec.size() ; i ++ )&#123;</div><div class="line">            <span class="built_in">cout</span>&lt;&lt;vec[i];</div><div class="line">            <span class="keyword">if</span>( i == vec.size() - <span class="number">1</span> )</div><div class="line">                <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">            <span class="keyword">else</span></div><div class="line">                <span class="built_in">cout</span> &lt;&lt; <span class="string">" -&gt; "</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">length</span><span class="params">(<span class="keyword">int</span> w)</span></span>&#123;</div><div class="line">        assert( w &gt;= <span class="number">0</span> &amp;&amp; w &lt; G.V() );</div><div class="line">        <span class="keyword">return</span> ord[w];</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// SHORTESTPATH_H_INCLUDED</span></span></div></pre></td></tr></table></figure></p>
<p>使用main函数测试:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"SparseGraph.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"DenseGraph.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ReadGraph.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Path.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ShortestPath.h"</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="built_in">string</span> filename = <span class="string">"testG3.txt"</span>;</div><div class="line">    SparseGraph g = SparseGraph(<span class="number">7</span>, <span class="literal">false</span>);</div><div class="line">    ReadGraph&lt;SparseGraph&gt; readGraph1(g, filename);</div><div class="line">    g.show();</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line"></div><div class="line">    Path&lt;SparseGraph&gt; dfs(g,<span class="number">0</span>);</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"DFS : "</span>;</div><div class="line">    dfs.showPath(<span class="number">6</span>);</div><div class="line"></div><div class="line">    ShortestPath&lt;SparseGraph&gt; bfs(g,<span class="number">0</span>);</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"BFS : "</span>;</div><div class="line">    bfs.showPath(<span class="number">6</span>);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="/2019/04/01/图的遍历/5.png" alt="测试结果"></p>
<p>使用深度优先遍历有可能会找到最短路径，这与图的创建、具体的存储顺序有关；但是使用广度优先遍历，一定能够找到两个连通点的最短路径。此外，在这个图中，如果求0到4的最短路径，有可能取出<code>0-&gt;6-&gt;4</code>或者<code>0-&gt;5-&gt;4</code>，这与在图中遍历的顺序是怎样的有关。</p>
<h2 id="广度优先遍历的复杂度"><a href="#广度优先遍历的复杂度" class="headerlink" title="广度优先遍历的复杂度"></a>广度优先遍历的复杂度</h2><p>广度优先遍历的复杂度和深度优先遍历的复杂度是一样的:</p>
<p>稀疏图（邻接表）:O(V+E)<br>稠密图（邻接矩阵）:O(V^2)</p>
<h1 id="java实现"><a href="#java实现" class="headerlink" title="java实现"></a>java实现</h1><p><img src="/2019/04/01/图的遍历/6.png" alt="程序结构"></p>
<p>其中几个主要的类实现参考<br><a href="https://homxuwang.github.io/2019/03/29/%E5%9B%BE%E8%AE%BA%E5%9F%BA%E7%A1%80/" target="_blank" rel="external">图论基础</a></p>
<p><code>Path.java</code>:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.Vector;</div><div class="line"><span class="keyword">import</span> java.util.Stack;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Path</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> Graph G; <span class="comment">// 图的引用</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> s;  <span class="comment">//起始点</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span>[] visited; <span class="comment">// 记录dfs的过程中节点是否被访问</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] from;  <span class="comment">// 记录路径，from[i]表示查找的路径上i的上一个节点</span></div><div class="line"></div><div class="line">    <span class="comment">//图的深度优先遍历</span></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">( <span class="keyword">int</span> v )</span></span>&#123;</div><div class="line">        visited[v] = <span class="keyword">true</span>;</div><div class="line">        <span class="keyword">for</span>( <span class="keyword">int</span> i : G.adj(v) )&#123; <span class="comment">// 遍历所有v的相邻点</span></div><div class="line">            <span class="keyword">if</span>( !visited[i] )&#123; <span class="comment">// 如果没有被遍历过</span></div><div class="line">                from[i] = v;   <span class="comment">//将v加入到路径数组</span></div><div class="line">                dfs(i);     <span class="comment">//递归进行遍历</span></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// 构造函数, 寻路算法, 寻找图graph从s点到其他点的路径</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Path</span><span class="params">(Graph graph , <span class="keyword">int</span> s)</span></span>&#123;</div><div class="line">        G = graph;</div><div class="line">        <span class="keyword">if</span>(!(s &gt;= <span class="number">0</span> &amp;&amp; s &lt; G.V() ))&#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"make sure that s &gt;= 0 and s &lt; G.V()"</span>);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        visited = <span class="keyword">new</span> <span class="keyword">boolean</span>[G.V()];</div><div class="line">        from = <span class="keyword">new</span> <span class="keyword">int</span>[G.V()];</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; G.V() ; i ++)&#123;</div><div class="line">            visited[i] = <span class="keyword">false</span>;</div><div class="line">            from[i] = -<span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">this</span>.s = s;</div><div class="line"></div><div class="line">        <span class="comment">//寻路算法</span></div><div class="line">        dfs(s);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//查询从s点到w点是否有路径</span></div><div class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">hasPath</span><span class="params">(<span class="keyword">int</span> w)</span></span>&#123;</div><div class="line">        <span class="keyword">if</span>(!(w &gt;= <span class="number">0</span> &amp;&amp; w &lt; G.V() ))&#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"make sure that w &gt;= 0 and w &lt; G.V()"</span>);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> visited[w];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//查询从s点到w点的路径,存放在vec中</span></div><div class="line">    <span class="function">Vector&lt;Integer&gt; <span class="title">path</span><span class="params">(<span class="keyword">int</span> w)</span></span>&#123;</div><div class="line">        <span class="keyword">if</span>(!(hasPath(w)))&#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"no path between s and w"</span>);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        Stack&lt;Integer&gt; s = <span class="keyword">new</span> Stack&lt;&gt;();</div><div class="line">        <span class="comment">//通过from数组逆向查找从s到w的路径，存放到栈中</span></div><div class="line">        <span class="keyword">int</span> p = w;</div><div class="line">        <span class="keyword">while</span> (p != -<span class="number">1</span>)&#123;</div><div class="line">            s.push(p);</div><div class="line">            p = from[p];</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">//从栈中取出元素，获得顺序的从s到w的路径</span></div><div class="line">        Vector&lt;Integer&gt; res = <span class="keyword">new</span> Vector&lt;&gt;();</div><div class="line">        <span class="keyword">while</span>( !s.empty() )&#123;</div><div class="line">            res.add( s.pop() );</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> res;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//打印出从s点到w点的路径</span></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">showPath</span><span class="params">(<span class="keyword">int</span> w)</span></span>&#123;</div><div class="line">        <span class="keyword">if</span>(!hasPath(w))&#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"no path between s and w"</span>);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        Vector&lt;Integer&gt; vec = path(w);</div><div class="line">        <span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; vec.size() ; i++)&#123;</div><div class="line">            System.out.print(vec.elementAt(i));</div><div class="line">            <span class="keyword">if</span>( i == vec.size() - <span class="number">1</span> )</div><div class="line">                System.out.println();</div><div class="line">            <span class="keyword">else</span></div><div class="line">                System.out.print(<span class="string">" -&gt; "</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><code>ShortestPath.java</code>:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.Vector;</div><div class="line"><span class="keyword">import</span> java.util.Stack;</div><div class="line"><span class="keyword">import</span> java.util.LinkedList;</div><div class="line"><span class="keyword">import</span> java.util.Queue;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShortestPath</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> Graph G; <span class="comment">//图的引用</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> s;  <span class="comment">//起始点</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span>[] visited; <span class="comment">// 记录dfs的过程中节点是否被访问</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] from; <span class="comment">//记录路径，from[i]表示查找的路径上i的上一个节点</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] ord;  <span class="comment">//记录路径中节点的次序，ord[i]表示i节点在路径中的次序</span></div><div class="line"></div><div class="line">    <span class="comment">//构造函数，寻路算法，寻找图graph从s点到其他点的路径</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ShortestPath</span><span class="params">(Graph graph, <span class="keyword">int</span> s)</span></span>&#123;</div><div class="line">        G = graph;</div><div class="line">        <span class="keyword">if</span>(!(s &gt;= <span class="number">0</span> &amp;&amp; s &lt; G.V() ))&#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"make sure that s &gt;= 0 and s &lt; G.V()"</span>);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        visited = <span class="keyword">new</span> <span class="keyword">boolean</span>[G.V()];</div><div class="line">        from = <span class="keyword">new</span> <span class="keyword">int</span>[G.V()];</div><div class="line">        ord = <span class="keyword">new</span> <span class="keyword">int</span>[G.V()];</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; G.V() ; i ++)&#123;</div><div class="line">            visited[i] = <span class="keyword">false</span>;</div><div class="line">            from[i] = -<span class="number">1</span>;</div><div class="line">            ord[i] = -<span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">this</span>.s = s;</div><div class="line"></div><div class="line">        <span class="comment">//无向图最短路径算法，s开始广度优先遍历整张图</span></div><div class="line">        Queue&lt;Integer&gt; q = <span class="keyword">new</span> LinkedList&lt;&gt;();</div><div class="line"></div><div class="line">        q.add(s);</div><div class="line">        visited[s] = <span class="keyword">true</span>;</div><div class="line">        ord[s] = <span class="number">0</span> ;</div><div class="line">        <span class="keyword">while</span>(!q.isEmpty())&#123;</div><div class="line">            <span class="keyword">int</span> v = q.remove();</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i : G.adj(v))</div><div class="line">                <span class="keyword">if</span>(!visited[i])&#123;</div><div class="line">                    q.add(i);</div><div class="line">                    visited[i] = <span class="keyword">true</span>;</div><div class="line">                    from[i] = v;</div><div class="line">                    ord[i] = ord[v] + <span class="number">1</span>;</div><div class="line">                &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//查询从s点到w点是否有路径</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasPath</span><span class="params">(<span class="keyword">int</span> w)</span></span>&#123;</div><div class="line">        <span class="keyword">if</span>(!(w &gt;= <span class="number">0</span> &amp;&amp; w &lt; G.V() ))&#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"make sure that w &gt;= 0 and w &lt; G.V()"</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> visited[w];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//查询从s点到w点的路径，存放在vec中</span></div><div class="line">    <span class="function"><span class="keyword">public</span> Vector&lt;Integer&gt; <span class="title">path</span><span class="params">(<span class="keyword">int</span> w)</span></span>&#123;</div><div class="line">        <span class="keyword">if</span>(!(hasPath(w)))&#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"no path between s and w"</span>);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        Stack&lt;Integer&gt; s = <span class="keyword">new</span> Stack&lt;&gt;();</div><div class="line">        <span class="comment">//通过from数组逆向查找从s到w的路径,存放在栈中</span></div><div class="line">        <span class="keyword">int</span> p = w;</div><div class="line">        <span class="keyword">while</span>(p != -<span class="number">1</span>)&#123;</div><div class="line">            s.push(p);</div><div class="line">            p = from[p];</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">//从栈中一次取出元素,获得顺序的从s到w的路径</span></div><div class="line">        Vector&lt;Integer&gt; res = <span class="keyword">new</span> Vector&lt;&gt;();</div><div class="line">        <span class="keyword">while</span> (!s.empty())&#123;</div><div class="line">            res.add(s.pop());</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> res;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//打印出从s到w的路径</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showPath</span><span class="params">(<span class="keyword">int</span> w)</span></span>&#123;</div><div class="line">        <span class="keyword">if</span>(!(hasPath(w)))&#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"no path between s and w"</span>);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        Vector&lt;Integer&gt; vec = path(w);</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; vec.size() ; i ++)&#123;</div><div class="line">            System.out.print(vec.elementAt(i));</div><div class="line">            <span class="keyword">if</span>(i == vec.size() - <span class="number">1</span>)</div><div class="line">                System.out.println();</div><div class="line">            <span class="keyword">else</span></div><div class="line">                System.out.print(<span class="string">" -&gt; "</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//查看从s点到w点的最短路径长度</span></div><div class="line">    <span class="comment">//若从s到w不可达，则返回-1</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">length</span><span class="params">(<span class="keyword">int</span> w)</span></span>&#123;</div><div class="line">        <span class="keyword">if</span>(!(w &gt;= <span class="number">0</span> &amp;&amp; w &lt; G.V() ))&#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"make sure that w &gt;= 0 and w &lt; G.V()"</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> ord[w];</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><code>testG3.txt</code>:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">7 8</div><div class="line">0 1</div><div class="line">0 2</div><div class="line">0 5</div><div class="line">0 6</div><div class="line">3 4</div><div class="line">3 5</div><div class="line">4 5</div><div class="line">4 6</div></pre></td></tr></table></figure></p>
<p><code>Main.java</code>:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</div><div class="line"></div><div class="line">        String filename = <span class="string">"testG3.txt"</span>;</div><div class="line">        SparseGraph g = <span class="keyword">new</span> SparseGraph(<span class="number">7</span>,<span class="keyword">false</span>);</div><div class="line">        ReadGraph readGraph = <span class="keyword">new</span> ReadGraph(g,filename);</div><div class="line">        g.show();</div><div class="line"></div><div class="line">        <span class="comment">//比较使用深度优先遍历和广度优先遍历获得路径的不同</span></div><div class="line">        <span class="comment">//广度优先遍历获得的是无权图的最短路径</span></div><div class="line">        Path dfs = <span class="keyword">new</span> Path(g,<span class="number">0</span>);</div><div class="line">        System.out.print(<span class="string">"DFS: "</span>);</div><div class="line">        dfs.showPath(<span class="number">6</span>);</div><div class="line"></div><div class="line">        ShortestPath bfs = <span class="keyword">new</span> ShortestPath(g,<span class="number">0</span>);</div><div class="line">        System.out.print(<span class="string">"BFS: "</span>);</div><div class="line">        bfs.showPath(<span class="number">6</span>);</div><div class="line"></div><div class="line">        System.out.println();</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>实验结果:</p>
<p><img src="/2019/04/01/图的遍历/7.png" alt="实验结果"></p>

    
  </div>

</article>


   

   
  <div class="box-prev-next clearfix">
    <a class="show pull-left" href="/2019/03/29/图论基础/">
        <i class="icon icon-angle-left"></i>
    </a>
    <a class="show pull-right" href="/2019/04/05/最小生成树/">
        <i class="icon icon-angle-right"></i>
    </a>
  </div>




</div>


  <a id="backTop" class="back-top">
    <i class="icon-angle-up"></i>
  </a>




  <div class="modal" id="modal">
  <span id="cover" class="cover hide"></span>
  <div id="modal-dialog" class="modal-dialog hide-dialog">
    <div class="modal-header">
      <span id="close" class="btn-close">关闭</span>
    </div>
    <hr>
    <div class="modal-body">
      <ul class="list-toolbox">
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/archives/"
              rel="noopener noreferrer"
              target="_self"
              >
              博客
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/category/"
              rel="noopener noreferrer"
              target="_self"
              >
              分类
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/tag/"
              rel="noopener noreferrer"
              target="_self"
              >
              标签
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/about/"
              rel="noopener noreferrer"
              target="_self"
              >
              关于
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/atom.xml"
              rel="noopener noreferrer"
              target="_blank"
              >
              RSS
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/search/"
              rel="noopener noreferrer"
              target="_self"
              >
              搜索
            </a>
          </li>
        
      </ul>

    </div>
  </div>
</div>



  
      <div class="fexo-comments comments-post">
    

    

    
    

    

    
    

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js"></script>
    <div id="comment" class="vcomment" ></div>
    <script>
        var notify = 'false' == true ? true : false;
        var verify = 'false' == true ? true : false;
        var GUEST_INFO = ['nick','mail','link'];
        var guest_info = 'nick,mail,link'.split(',').filter(function(item){
            return GUEST_INFO.indexOf(item) > -1
        });
        guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;
        window.valine = new Valine({
            el: '.vcomment',
            notify: notify,
            verify: verify,
            appId: "iFklDyH6wGe8Do5e9binSdWh-gzGzoHsz",
            appKey: "FpJsLvikc9nea305u094EDFf",
            avatar:'mm',
            placeholder: "Just go go",
            guest_info:guest_info,
            pageSize:'10'
        });
    </script>
  
    

  </div>

  

  <script type="text/javascript">
  function loadScript(url, callback) {
    var script = document.createElement('script')
    script.type = 'text/javascript';

    if (script.readyState) { //IE
      script.onreadystatechange = function() {
        if (script.readyState == 'loaded' ||
          script.readyState == 'complete') {
          script.onreadystatechange = null;
          callback();
        }
      };
    } else { //Others
      script.onload = function() {
        callback();
      };
    }

    script.src = url;
    document.getElementsByTagName('head')[0].appendChild(script);
  }

  window.onload = function() {
    loadScript('/js/bundle.js?235683', function() {
      // load success
    });
  }
</script>

</body>
</html>
